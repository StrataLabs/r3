var webengage=webengage||{};var _weq=_weq||{};setTimeout(function(){(function(d,a,f,c,e){var b=function(){var g=null,o=function(u,t,s){for(var r in t){if(u[r]===e||(typeof s=="boolean"&&s)){u[r]=t[r]}}return u};o(c,{util:{copy:function(t,s,r){return o(t,s,r)},loadScript:function(u,v,r,w){var t=a.createElement("script");t.type="text/javascript";t.charset="UTF-8";t.async=true;t.src=u;t.callBack=v;t.callBackArgs=r||[];t.errorCallBack=w;this.appendChild(t);if(typeof(t.callBack)=="function"){if(c.BrowserDetect.ie()){var s=function(y){var x=(y?y:d.event).target?(y?y:d.event).target:(y?y:d.event).srcElement;if(x.readyState=="loaded"||x.readyState=="complete"){this.callBack.apply(this,this.callBackArgs)}};t.defer=true;t.onreadystatechange=s}else{if(t.addEventListener){t.addEventListener("load",function(x){this.callBack.apply(this,this.callBackArgs)},false);if(typeof(this.errorCallBack)=="function"){t.addEventListener("error",function(x){this.errorCallBack(x)},true)}}else{t.attachEvent("onload",function(x){this.callBack.apply(this,this.callBackArgs)});if(typeof(this.errorCallBack)=="function"){t.attachEvent("onerror",function(x){this.errorCallBack(x)})}}}}},createObj:function(s){var t=c,r=s?s.split("."):[];for(var u=0;u<r.length;u++){var w=r[u],v=t[w];if(!v){v={};t[w]=v}t=v}return t},extend:function(r,s){return c.util.copy((typeof r=="string"?c.util.createObj(r):r),s)},isJqueryPresent:function(){return(d.jQuery!==e&&parseFloat("."+d.jQuery().jquery.replace(/\./g,""))>=0.13)},applyCss:function(t,s){try{for(var r in s){if(typeof s[r]=="function"){t.style[r]=s[r]()}else{t.style[r]=s[r]}}}catch(u){}return t},inArray:function(r,t){for(var s=0;s<r.length;s++){if(r[s]==t){return true}}return false},getMaxZIndex:function(){if(this.maxZIndex===e){this.maxZIndex=16776271}return this.maxZIndex++},alignCenter:function(u,t,s){var r=(s=="left")?"right":"left";u.style.top=((parseInt(c.util.getElementHeight(t),10)-parseInt(c.util.getElementHeight(u),10))/2-(/Firefox/i.test(navigator.userAgent)?7:0))+"px";u.style[r]=(parseInt(c.util.getElementWidth(t),10)-parseInt(c.util.getElementWidth(u),10))/2+10+"px"},getElementWidth:function(r){if(r.clip!==e){return r.clip.width}else{if(r.style.pixelWidth){return r.style.pixelWidth}else{return r.offsetWidth}}},getElementHeight:function(r){if(r.clip!==e){return r.clip.height}else{if(r.style.pixelHeight){return r.style.pixelHeight}else{return r.offsetHeight}}},getInitParamValue:function(r,v,s,u){var t=s!==e?s:null;if(r&&r[v]){var w=r[v];if(u){if(c.util.inArray(u,w)){t=w}}else{t=w}}return t},getInitParamValueAsArray:function(r,x,u,w){var v=c.util.getInitParamValue(r,x,u);if(v&&typeof(v)!="object"){v=v.split(/\s*,\s*/)}if(w&&typeof(w)=="object"){var s=[];for(var t=0;t<v.length;t++){if(c.util.inArray(w,v[t])){s[s.length]=v[t]}}v=s}return v},setCookie:function(t,v,r,y,u,x){var s=new Date();s.setTime(s.getTime());if(r){r=r*1000*60*60*24}var w=new Date(s.getTime()+(r));a.cookie=t+"="+encodeURIComponent(v)+((r)?";expires="+w.toGMTString():"")+((y)?";path="+y:"")+((u)?";domain="+u:"")+((x)?";secure":"")},getCookie:function(r){var w=a.cookie.split(";");var s="";var u="";var v="";var t=false;for(i=0;i<w.length;i++){s=w[i].split("=");u=s[0].replace(/^\s+|\s+$/g,"");if(u==r){t=true;if(s.length>1){v=decodeURIComponent(s[1].replace(/^\s+|\s+$/g,""))}return v===null?"":v}s=null;u=""}if(!t){return null}},getCurrentTime:function(s){var v=new Date();var t=v.getTime();if(s!==e){var u=v.getTimezoneOffset()*60000;var r=t+u;t=r+(1000*s)}return t},setWebengageCookie:function(s){var u=s||{};var t={time:(new Date()).getTime()};u=c.util.copy(u,t);var r=c.util.stringify(u);c.util.setCookie("_we_wk_ls_",r,99999,"/","","");this.firstTimeUser=true},getWebengageCookie:function(){return new Function("return "+c.util.getCookie("_we_wk_ls_"))()},setSessionCookie:function(){var r=c.util.stringify({referrer:a.referrer,country:c.GEO.country(),region:c.GEO.region(),city:c.GEO.city(),isFirstTime:c.util.isFirstTimeUser()});c.util.setCookie("_we_wk_ss_",r,"","/","","");return r},getSessionCookie:function(){var r=null;try{var t=c.util.getCookie("_we_wk_ss_");r=(new Function("return "+t)())||null}catch(s){r=c.util.setSessionCookie()}return r},updateSessionCookie:function(s){var r=s||c.util.getSessionCookie();if(r){r.referrer=a.referrer;r=c.util.stringify(r);c.util.setCookie("_we_wk_ss_",r,"","/","","")}else{r=c.util.setSessionCookie()}return r},getClientPageUrl:function(){return d.location.href},getClientPageHost:function(){return d.location.host},escapeScopeChars:function(r){return(r+"").replace(/([,#[\]\\])/g,"$1")},escapeForRegExp:function(r){return(r+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},isFirstTimeUser:function(){return(this.firstTimeUser!==e)?this.firstTimeUser:false},stringify:function(w){var u=typeof(w);if(u!="object"||w===null){if(u=="string"){w='"'+w+'"'}return String(w)}else{var x,v,t=[],r=(w&&w.constructor==Array);if(r){for(var s=0;s<w.length;s++){v=w[s];u=typeof(v);if(u=="string"){v='"'+v+'"'}else{if(u=="object"&&v!==null){v=c.util.stringify(v)}}t.push(String(v))}}else{for(x in w){v=w[x];u=typeof(v);if(u=="string"){v='"'+v+'"'}else{if(u=="object"&&v!==null){v=c.util.stringify(v)}}t.push('"'+x+'":'+String(v))}}return(r?"[":"{")+String(t)+(r?"]":"}")}},isColorTooLight:function(t){t=t.indexOf("#")===0?t.substr(1,t.length):t;var v=parseInt(t.substr(0,2),16);var u=parseInt(t.substr(2,2),16);var s=parseInt(t.substr(4,2),16);var w=((v*299)+(u*299)+(s*299))/1000;return w>=128},isEmptyObject:function(r){for(var s in r){if(r.hasOwnProperty(s)){return false}}return true},parseJSON:function(r){return new Function("return "+r+";")()},bind:function(x,v){var y=this;var w=y.callbacks||{};if(x!==e&&typeof(v)==="function"){var z=v;v=function(){return z.apply(this,arguments)};v.cbid=z.cbid||(z.cbid=y.cbid++);x=(x||"").match(/\S+/g)||[""];var u=x.length;while(u--){var s=x[u];var r=w[s]||{};r[v.cbid]=v;w[s]=r}y.callbacks=w}return y},unbind:function(r,s){var t=this;if(r!==e){if(typeof(t.callbacks)==="object"&&typeof(t.callbacks[r])==="object"){if(typeof(s)==="function"&&s.cbid){delete t.callbacks[r][s.cbid]}else{delete t.callbacks[r]}}}return t},executeCallbacks:function(){var u=this;var r=arguments[0];if(r!==e&&typeof u.callbacks==="object"&&typeof u.callbacks[r]==="object"){for(var s in u.callbacks[r]){if(typeof u.callbacks[r][s]==="function"){var t=u.callbacks[r][s].apply(this,arguments);if(typeof t==="boolean"&&!t){return false}}}}},markSurveyAsClosed:function(s){if(s){try{var r=c.util.getSessionCookie();if(r.closedSurveys===e||!r.closedSurveys){r.closedSurveys=""}if(r.closedSurveys.indexOf("##"+s)<0){r.closedSurveys+="##"+s}c.util.updateSessionCookie(r)}catch(t){}}},markSurveyAsTaken:function(s){if(s){try{var r=c.util.getWebengageCookie();if(r.takenSurveys===e||!r.takenSurveys){r.takenSurveys=""}r.takenSurveys+="##"+s;c.util.setWebengageCookie(r)}catch(t){}}},markNotificationAsShown:function(v){if(v){var r=1;try{var t=c.util.getWebengageCookie();t.seenNIds=t.seenNIds&&t.seenNIds!==e?t.seenNIds:"";if(t.seenNIds.indexOf("##"+v)<0){t.seenNIds+="##"+v+"="+r}else{var s=new RegExp("##"+v+"=(\\d+)","g");t.seenNIds=t.seenNIds.replace(s,function(w,x){r=(+x+1);return"##"+v+"="+r})}c.util.setWebengageCookie(t)}catch(u){}}},markNotificationAsClicked:function(t){if(t){try{var r=c.util.getWebengageCookie();r.takenNIds=r.takenNIds&&r.takenNIds!==e?r.takenNIds:"";if(r.takenNIds.indexOf("##"+t)<0){r.takenNIds+="##"+t}c.util.setWebengageCookie(r)}catch(s){}}},markNotificationAsClosed:function(t){if(t){try{var r=c.util.getSessionCookie();if(r.closedNIds===e||!r.closedNIds){r.closedNIds=""}if(r.closedNIds.indexOf("##"+t)<0){r.closedNIds+="##"+t}c.util.updateSessionCookie(r)}catch(s){}}},getVersion:function(){return k.widgetVersion}}},true);var q=c.util;var k={widgetVersion:"4",baseWebEngageUrl:"//webengage.com",surveyAppHost:"survey.webengage.com",widgetDomain:(a.location.protocol=="https:"?"//ssl.widgets.webengage.com":"//cdn.widgets.webengage.com"),baseStaticUrl:"//static-webengage.s3-ap-southeast-1.amazonaws.com",loadSurveyWidgetJQueryUrl:"/js/widget/survey-widget-w-jquery-v-4.0.js?v=103.0",loadSurveyWidgetWoJQueryUrl:"/js/widget/survey-widget-wo-jquery-v-4.0.js?v=103.0",loadSurveyWidgetJQueryUrlv3:"/js/widget/survey-widget-w-jquery.js?v=103.0",loadSurveyWidgetWoJQueryUrlv3:"/js/widget/survey-widget-wo-jquery.js?v=103.0",notificationWidgetScriptUrl:"/js/widget/publisher-notification-widget-gen-v-4.1.js?v=103.0",findAllTakenSurveysUrl:function(){return"//survey.webengage.com/publisher-widget-loader.html?action=findAllTakenSurveys&licenseCode="+f["webengage.licenseCode"]+"&url="+encodeURIComponent(q.getClientPageUrl())},widgetContainerId:"webklipper-publisher-widget-container",feedbackImageBaseUrl:"//s3-ap-southeast-1.amazonaws.com/wk-static-files/webengage/feedbacktab/",serverTimestampUrl:"//notification.webengage.com/publisher-widget-loader.html?action=timestamp",loadFeedbackWidgetJQueryUrl:"/js/widget/feedback-widget-w-jquery-v-4.0.js?v=103.0",loadFeedbackWidgetWoJQueryUrl:"/js/widget/feedback-widget-wo-jquery-v-4.0.js?v=103.0",loadFeedbackWidgetJQueryUrlv3:"/js/widget/feedback-widget-w-jquery.js?v=103.0",loadFeedbackWidgetWoJQueryUrlv3:"/js/widget/feedback-widget-wo-jquery.js?v=103.0"};var n={};q.extend("logger",(function(){var s={containerCss:{position:function(){return c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?"absolute":"fixed"},cursor:"default",margin:0,zIndex:(q.getMaxZIndex()+1),backgroundColor:"red",right:"0px",bottom:"0px",display:"block",padding:"10px",maxWidth:"500px",textAlign:"left",lineHeight:"17px",background:"none repeat scroll 0 0 #ff9",border:"1px solid #fc6",borderBottomWidth:"0px",borderRightWidth:"0px",borderTopLeftRadius:"5px",MozBorderRadiusTopleft:"5px",WebkitBorderTopLeftRadius:"5px",boxShadow:"0 1px 0 0 rgba(255, 255, 255, 0.6) inset, 0 1px 1px rgba(0, 0, 0, 0.1)",MozBoxShadow:"0 1px 0 0 rgba(255, 255, 255, 0.6) inset, 0 1px 1px rgba(0, 0, 0, 0.1)",WebkitBoxShadow:"0 1px 0 0 rgba(255, 255, 255, 0.6) inset, 0 1px 1px rgba(0, 0, 0, 0.1)",fontFamily:"Arial, sans-serif",fontSize:"13px"},dataDivCss:{margin:"0px",padding:"0px",color:"#000",textShadow:"1px 1px #f1f1f1",textDecoration:"none",fontFamily:"inherit",fontSize:"inherit"},dataDivLinkCss:{color:"#039",textDecoration:"underline",textShadow:"1px 1px #f1f1f1",fontFamily:"inherit",fontSize:"inherit"},closeButtonCss:{color:"#039",textDecoration:"underline",textShadow:"1px 1px #f1f1f1",cursor:"pointer",cssFloat:"right",styleFloat:"right",marginRight:"5px",marginLeft:"30px"}},r=function(D,C){var v=a.getElementById("webengage-error-messages");if(v){v.parentNode.removeChild(v)}var x=a.createElement("div");x.setAttribute("id","webengage-error-messages");x=q.applyCss(x,s.containerCss);a.body.insertBefore(x,null);var B=a.createElement("div");B=q.applyCss(B,s.closeButtonCss);B.innerHTML="x";x.appendChild(B);B.onclick=function(){this.parentNode.parentNode.removeChild(this.parentNode)};var u=a.createElement("div");u=q.applyCss(u,s.dataDivCss);x.appendChild(u);u.innerHTML=D;var y=u.getElementsByTagName("a");if(y&&y.length>0){for(var z=0;z<y.length;z++){q.applyCss(y[z],s.dataDivLinkCss);var w=y[z].getAttribute("href");var t=w.split("#");var A=t[0];A=A.indexOf("?")<0?(A+"?"):A;A=A+"&ref=widget-message";A=t.length==2?(A+"#"+t[1]):A;y[z].setAttribute("href",A)}}return x};return{success:function(t){return r(t,"success")},warn:function(t){return r(t,"warn")},error:function(t){return r(t,"error")}}})());q.extend("GEO",{country:function(){return this._country||""},country_code:function(){return this._country_code||""},region:function(){return this._region||""},city:function(){return this._city||""},latitude:function(){return this._latitude||""},longitude:function(){return this._longitude||""},isLoaded:function(){return this._geoLoaded||false},setGeoData:function(t){var s=this;if(!c.GEO.isLoaded()){var r=t||{};s._country=r.geoplugin_countryName||"";s._country_code=r.geoplugin_country_code||"";s._region=r.geoplugin_region||"";s._city=r.geoplugin_city||"";s._latitude=r.geoplugin_latitude||"";s._longitude=r.geoplugin_longitude||"";s._geoLoaded=true}},load:function(s){if(!c.GEO.isLoaded()){var r="http://geo.services.webklipper.com/geoip/?jsoncallback="+encodeURI("webengage.GEO.setGeoData");if(a.location.protocol=="https:"){r=k.baseWebEngageUrl+"/json/geoip.html?cb="+encodeURI("webengage.GEO.setGeoData")}q.loadScript.apply(k.widgetContainer,[r,function(){if(typeof s=="function"){s()}}])}}});q.extend("BrowserDetect",(function(){var s,y,t,w=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:d.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],u=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"Mobile",identity:"Mobile"}],v=function(C){for(var z=0;z<C.length;z++){var A=C[z].string;var B=C[z].prop;this._versionSearchString=C[z].versionSearch||C[z].identity;if(A){if(A.indexOf(C[z].subString)!=-1){return C[z].identity}}else{if(B){return C[z].identity}}}},r=function(B){var A=B.indexOf(this._versionSearchString);if(A==-1){return}var z=parseFloat(B.substring(A+this._versionSearchString.length+1));if(s=="Explorer"&&7<=z&&z<8){if(B.indexOf("Trident/4")!=-1){z=8}else{if(B.indexOf("Trident/5")!=-1){z=9}else{if(B.indexOf("Trident/6")!=-1){z=10}}}}return z},x=function(){if(s&&y&&t){return}s=v(w)||"An unknown browser";y=r(navigator.userAgent)||r(navigator.appVersion)||"an unknown version";t=v(u)||"an unknown OS"};return{browser:function(){return x()||s},version:function(){return x()||y},os:function(){return x()||t},is_this_the_worlds_most_annoying_browser:function(){return(a.all&&!d.opera&&!d.XMLHttpRequest)},ie:function(){return(navigator.appName=="Microsoft Internet Explorer")}}})());q.extend("feedback",(function(){var r=[],s={onOpen:function(t){return this.bind("open",t)},onSubmit:function(t){return this.bind("submit",t)},onClose:function(t){return this.bind("close",t)},bind:function(){return q.bind.apply(this,arguments)},unbind:function(){return q.unbind.apply(this,arguments)},executeCallbacks:function(){return q.executeCallbacks.apply(this,arguments)}};return{render:function(t){return(new function(){c.feedback.clear();var F=this;F.cbid=1;r[r.length]=F;F._feedbackOptions={launchType:f["webengage.feedback.launchType"]||"",externalLinkId:f["webengage.feedback.externalLinkId"]||"",alignment:f["webengage.feedback.alignment"]||"",borderColor:f["webengage.feedback.borderColor"]||"",backgroundColor:f["webengage.feedback.backgroundColor"]||"",snapshotEnabled:f["webengage.feedback.snapshotEnabled"]||"",defaultCategory:f["webengage.feedback.defaultCategory"]||"",showAllCategories:(typeof f["webengage.feedback.showAllCategories"]==="boolean"&&!f["webengage.feedback.showAllCategories"])?false:true,showForm:f["webengage.feedback.showForm"]||false,isDemoMode:f["webengage.feedback.isDemoMode"]||f["webengage.isDemoMode"]||false,customData:f["webengage.feedback.customData"]||f["webengage.customData"]||{},formData:f["webengage.feedback.formData"]||f["webengage.formData"]||[]};if(t!==e&&t.data!==e&&t.data){var U=t.data;if(U.name!==e&&U.name){F._feedbackOptions.formData.push({name:"name",value:U.name})}if(U.email!==e&&U.email){F._feedbackOptions.formData.push({name:"email",value:U.email})}if(U.category!==e&&U.category){F._feedbackOptions.formData.push({name:"category",value:U.category})}}var x={feedbackLaunchType:"launchType",feedbackExternalLinkId:"externalLinkId",feedbackButtonAlignment:"alignment",feedbackButtonBorderColor:"borderColor",feedbackButtonBackgroundColor:"backgroundColor",defaultFeedbackCategory:"defaultCategory",showAllFeedbackCategories:"showAllCategories",showFeedbackForm:"showForm",data:"customData",demo:"isDemoMode"};if(t!==e&&!q.isEmptyObject(t)){for(var u in t){var R=x[u];if(R!==e&&R){t[R]=t[u];delete t[u]}}}F._feedbackOptions=q.copy(F._feedbackOptions,(t?t:{}),true);q.copy(F,s,true);F.onSubmit((F._feedbackOptions.onSubmit||f["webengage.feedback.onSubmit"]));F.onClose((F._feedbackOptions.onClose||f["webengage.feedback.onClose"]));F.onOpen((F._feedbackOptions.onOpen||f["webengage.feedback.onOpen"]));if(n.feedback&&n.feedback.isEnabled&&(a.location.protocol=="http:"||(a.location.protocol=="https:"&&n.sslEnabled))){var G=n.feedback.config,N={alignment:["right","left"],launchTypes:["feedbackButton","externalLink"],containerCss:{margin:0,padding:0,position:(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?"absolute":"fixed"),border:"5px solid #ccc",backgroundColor:"#f9f9f9",borderWidth:"1px",borderStyle:"solid"},containerRightCss:{right:"0px",borderRightWidth:"0px"},containerLeftCss:{left:"0px",borderLeftWidth:"0px"},commonCss:{margin:0,padding:0,cursor:"pointer",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundPosition:"center 0",display:"block",paddingBottom:"7px",paddingLeft:"3px",paddingRight:"3px",paddingTop:"7px"},tabCssWithIcon:{backgroundPosition:"center bottom",paddingBottom:"33px"},closeCommonCss:{height:"22px",width:"22px",cursor:"pointer",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",position:"absolute",top:"-14px",backgroundImage:"url('"+k.baseStaticUrl+"/images/icons/feedback-widget-close.png')",backgroundColor:"transparent",display:"none"},leftCloseCss:{right:"-14px"},rightCloseCss:{left:"-14px"},feedbackBgImageForDarkBackground:k.baseStaticUrl+"/images/webengage/icons/feedback-tab-bg-dark.png",feedbackBgImageForLightBackground:k.baseStaticUrl+"/images/webengage/icons/feedback-tab-bg-light.png",feedbackTextImage:k.feedbackImageBaseUrl+G.imgPath,sizeCss:{height:G.imgHeight+"px",width:G.imgWidth+"px"},leftCss:{cssFloat:"right",styleFloat:"right"},rightCss:{cssFloat:"left",styleFloat:"left"},loadingCss:{fontFamily:"Arial, sans-serif",fontSize:"10px",color:"#666",textDecoration:"none",position:"absolute",textAlign:"center"},maxWidth:"450px",maxHeight:(c.BrowserDetect.ie()?"349px":"345px")},P={getButtonCssBasedOnConfig:function(W,X){var V={};V=q.copy(V,N.sizeCss);if(W=="left"){V=q.copy(V,N.leftCss)}else{V=q.copy(V,N.rightCss)}if(X){V=q.copy(V,N.tabCssWithIcon)}return V},getContainerCssBasedOnConfig:function(W){var V={};V=q.copy(V,N.containerCss);if(W=="right"){V=q.copy(V,N.containerRightCss)}else{V=q.copy(V,N.containerLeftCss)}return V},getCloseCssBasedOnConfig:function(W){var V={};if(W=="right"){V=q.copy(V,N.rightCloseCss)}else{V=q.copy(V,N.leftCloseCss)}return V},getButtonCssBasedOnBackgroundColor:function(W){var V={};if(q.isColorTooLight(W)){V=q.copy(V,{backgroundImage:("url('"+N.feedbackBgImageForLightBackground+"')")})}else{V=q.copy(V,{backgroundImage:("url('"+N.feedbackBgImageForDarkBackground+"')")})}return V},getCustomTextImageCss:function(){var V={};V=q.copy(V,{backgroundImage:("url('"+N.feedbackTextImage+"')")});return V}},M=(G.closeImg===e||G.closeImg===null||G.closeImg==="")?(k.baseStaticUrl+"/images/icons/feedback-widget-close.png"):("//s3-ap-southeast-1.amazonaws.com/"+G.closeImg),L=q.getInitParamValue(F._feedbackOptions,"alignment",G.alignment,N.alignment),z=q.getInitParamValueAsArray(F._feedbackOptions,"launchType",G.launchType,N.launchTypes),y=q.getInitParamValueAsArray(F._feedbackOptions,"externalLinkId",G.externalLinkId),D=q.getInitParamValue(F._feedbackOptions,"backgroundColor",G.backgroundColor),S=q.getInitParamValue(F._feedbackOptions,"borderColor",G.borderColor),O=q.getInitParamValue(F._feedbackOptions,"snapshotEnabled",((G.snapshotEnabled===e)?true:G.snapshotEnabled)),Q=q.inArray(z,N.launchTypes[0]),H=G.imgWidth,B=G.imgHeight,E=G.showWeIcon;D=D.indexOf("#")===0?D:("#"+D);S=S.indexOf("#")===0?S:("#"+S);var J=a.createElement("div");k.widgetContainer.appendChild(J);J.setAttribute("id",k.widgetContainerId+"-content");var T=J.style;J=q.applyCss(J,N.containerCss);J=q.applyCss(J,P.getContainerCssBasedOnConfig(L));J.style.width=(parseInt(H)+3+3)+"px";var w=(parseInt(B)+7+7+(E?(3+26):0))+"px";T.borderColor=S;T.top=(("innerHeight" in d?d.innerHeight:a.documentElement.clientHeight)-parseInt(B))/2+"px";T.zIndex=(q.getMaxZIndex()+1);var C=a.createElement("div");J.appendChild(C);C.id=k.widgetContainerId+"-close-div";C=q.applyCss(C,N.closeCommonCss);C=q.applyCss(C,P.getCloseCssBasedOnConfig(L));C.style.backgroundImage="url('"+M+"')";if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){C.style.backgroundImage="";C.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop src='"+M+"')"}var K=a.createElement("div");J.appendChild(K);K.setAttribute("id",k.widgetContainerId+"-content-expand-collapse");var I=K.style;K=q.applyCss(K,N.commonCss);K=q.applyCss(K,P.getButtonCssBasedOnConfig(L,E));K=q.applyCss(K,P.getButtonCssBasedOnBackgroundColor(D));if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){I.backgroundImage="";var v=(q.isColorTooLight(D)?N.feedbackBgImageForLightBackground:N.feedbackBgImageForDarkBackground);I.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop src='"+v+"')"}I.backgroundColor=D;I.zIndex=q.getMaxZIndex()+1;if(!Q){J.style.display="none"}var A=a.createElement("div");K.appendChild(A);A.style.width=parseInt(H)+"px";A.style.height=parseInt(B)+"px";A.style.margin="0px";A.style.padding="0px";A=q.applyCss(A,P.getCustomTextImageCss());if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){A.style.backgroundImage="";I.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop src='"+N.feedbackTextImage+"')"}C.style.zIndex=q.getMaxZIndex()+1;F.close=function(){try{J.removeChild(a.getElementById(k.widgetContainerId+"-loading"))}catch(V){}try{J.removeChild(a.getElementById(k.widgetContainerId+"-content"))}catch(V){}try{a.getElementById(k.widgetContainerId+"-content-expand-collapse").isCurrentlyOpen=false}catch(V){}C.style.display="none";J.style.width=(parseInt(H)+3+3)+"px";if(!Q){K.style.display="none"}};C.onclick=function(){F.close()};F.open=function(){J.style.display="block";J.style.width="300px";var W=a.createElement("div");W.id=k.widgetContainerId+"-loading";W=q.applyCss(W,N.loadingCss);W.innerHTML="Loading<br/>please wait ...";J.appendChild(W);q.alignCenter(W,J,L);F.feedbackLoadStartTime=new Date();var V="";if(q.isJqueryPresent()){V=k.widgetDomain+(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?k.loadFeedbackWidgetWoJQueryUrlv3:k.loadFeedbackWidgetWoJQueryUrl)}else{V=k.widgetDomain+(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?k.loadFeedbackWidgetJQueryUrlv3:k.loadFeedbackWidgetJQueryUrl)}c.feedbackLoadStartTime=new Date();var X=a.createElement("script");X.type="text/javascript";X.src=V;k.widgetContainer.appendChild(X);C.style.display="block"};K.onclick=function(){F.open()};if(y&&y.length>0){(function(){for(var W=0;W<y.length;W++){var X=y[W];var V=a.getElementById(X);if(V){V.onclick=function(Y){var Z=Y||d.event;Z.cancelBubble=true;if(Z.stopPropagation){Z.stopPropagation()}if(Z.preventDefault){Z.preventDefault()}else{Z.returnValue=false}K.onclick();return false}}}})()}a.$FeedbackWidgetInitializer={containerId:k.widgetContainerId,licenseCode:g,appHost:k.baseWebEngageUrl,minWidth:(parseInt(H)+3+3)+"px",maxWidth:N.maxWidth,minHeight:w,maxHeight:N.maxHeight,showFeedbackButton:Q,buttonAlignment:L,borderColor:S.substring(1),snapshotEnabled:O,currentInstance:F};if(F._feedbackOptions.showForm==true){K.onclick()}}else{if(n.feedback&&n.feedback.isEnabled&&a.location.protocol=="https:"&&!n.sslEnabled){}}})},clear:function(){try{k.widgetContainer.removeChild(a.getElementById(k.widgetContainerId+"-content"))}catch(t){}r=[];a.$FeedbackWidgetInitializer=null}}})());q.extend("ruleExecutor.constants",{SEARCH_ENGINE_REGEXP:{google:{pattern:"^(?:http://)?(www\\.)?google\\..*/.*$",queryParam:"q"},yahoo:{pattern:"^(?:http://)?(?:([a-z]{2})\\.)?search\\.yahoo\\.com/.*$",queryParam:"p"},bing:{pattern:"^(?:http://)?((?:www|[a-z]{2})\\.)?bing\\.com/search\\?.*$",queryParam:"q"},ask:{pattern:"^(?:http://)?www\\.ask\\.com/.*$",queryParam:"q"},baidu:{pattern:"^(?:http://)?www\\.baidu\\.com/.*$",queryParam:"wd"},yandex:{pattern:"^(?:http://)?www\\.yandex\\.com/.*$",queryParam:"text"},duckduckgo:{pattern:"^(?:http://)?www\\.duckduckgo\\.com/.*$",queryParam:"q"}},SOCIAL_MEDIA_REGEX:"^(?:http://)?(.*.)?(facebook|twitter)\\.com/.*$"});q.extend("ruleExecutor.util",(function(r){return{isMatches:function(u,s){if(u){if(u instanceof Array){for(var v=0;v<u.length;v++){if(c.ruleExecutor.util.isMatches(u[v],s)){return true}}}else{if(s instanceof Array){for(var t=0;t<s.length;t++){if(u.match(new RegExp(s[t],"gi"))){return true}}}else{if(u.match(new RegExp(s,"gi"))){return true}}}}return false},getCurrentTimeInSec:function(v){var u=new Date(v);var s=u.getHours();var w=u.getMinutes();var t=u.getSeconds();return(s*60*60+w*60+t)},getClientTime:function(){var s=q.getCurrentTime();return c.ruleExecutor.util.getCurrentTimeInSec(s)},getPublisherTime:function(){var s=q.getCurrentTime(k.publisherTimeZoneOffset);return c.ruleExecutor.util.getCurrentTimeInSec(s)},isContains:function(s,u,t){if(typeof(s)!="function"){return false}var z=false;var v=t||"contains_any";var y=s();if(y!==e&&y){var x=[];if(y instanceof Array){for(var w in y){x[y[w].toLowerCase()]=true}}else{x[y]=true}if(u!==e&&u){if(u instanceof Array){if(v=="contains_all"){for(var w in u){if(x[u[w].toLowerCase()]==true){z=true;continue}z=false;break}}else{for(var w in u){if(x[u[w].toLowerCase()]==true){z=true;break}}}}else{z=x[u.toLowerCase()]==true}}}return z},getReferrers:function(){var t=[];var s=q.getSessionCookie();if(s&&s.referrer){t[t.length]=s.referrer.toLowerCase()}if(a.referrer&&s.referrer!=a.referrer){t[t.length]=a.referrer.toLowerCase()}return t},getCountry:function(){return q.getSessionCookie().country||""},getRegion:function(){return q.getSessionCookie().region||""},getCity:function(){return q.getSessionCookie().city||""},getSearchEngineMatchResult:function(){var u=c.ruleExecutor.util.getReferrers();var s={isSER:false};for(var t in r.SEARCH_ENGINE_REGEXP){if(c.ruleExecutor.util.isMatches(u,r.SEARCH_ENGINE_REGEXP[t].pattern)!=false){s.isSER=true;s.url=u;s.queryParam=r.SEARCH_ENGINE_REGEXP[t].queryParam;break}}return s},isSearchEngineReference:function(){return(c.ruleExecutor.util.getSearchEngineMatchResult()).isSER},isSocialMediaReference:function(){return c.ruleExecutor.util.isMatches(c.ruleExecutor.util.getReferrers(),r.SOCIAL_MEDIA_REGEX)},isFirstTime:function(){var s=q.getSessionCookie();return(s&&(typeof s.isFirstTime==="boolean"&&s.isFirstTime))?true:false},getSearchTerms:function(){var u=[];var s=c.ruleExecutor.util.getSearchEngineMatchResult();if(s.isSER){var t=decodeURI(c.ruleExecutor.util.getParamValue(s.url,s.queryParam));u=c.ruleExecutor.util.jsTokenizer(t)}return u},jsTokenizer:function(v,x){var w=[];if(v!==e&&v){var u=q.escapeForRegExp("-=[]{}()*+?.,^$|#s\r\n\t&/~'\"_:;%|@!`<>\\");if(x!==e&&x){if(x instanceof Array){u=q.escapeForRegExp(x.join(""))}else{u=q.escapeForRegExp(x)}}v=v.replace(new RegExp("["+u+"]","g")," ");var s=v.split(/\s/g);for(var t=0;t<s.length;t++){if(s[t]!=""){w[w.length]=s[t]}}}return w},getParamValue:function(t,v){var w="";var u=new RegExp("[\\?&]"+v+"=([^&#]*)");var s=u.exec(t);if(s!==null){w=s[1]}return w},getBrowser:function(){return c.BrowserDetect.browser()},getBrowserVersion:function(){return c.BrowserDetect.version()},getOS:function(){return c.BrowserDetect.os()},escapeForRegExp:function(s){return q.escapeForRegExp(s)}}})(c.ruleExecutor.constants));q.extend("ruleExecutor",(function(t,s){var r={referer:t.getReferrers,url:q.getClientPageUrl(),cookie:q.getCookie,country:t.getCountry,region:t.getRegion,city:t.getCity,time:"",isFirstTime:t.isFirstTime,isSER:t.isSearchEngineReference,isSMR:t.isSocialMediaReference,searchTerms:t.getSearchTerms,os:t.getOS,browser:t.getBrowser,endUserTime:t.getClientTime,publisherTime:t.getPublisherTime,browser_version:t.getBrowserVersion};return{execute:function(v,u){u=q.copy(r,(u?u:{}),true);v=(v!==e)?v:true;return(new Function("_weUtil","_ruleUtil","_constants","operands","return ("+v+");")(q,t,s,u))}}})(c.ruleExecutor.util,c.ruleExecutor.constants));q.extend("survey",(function(){var r=[],s=function(G){if(G!==e&&G){var C=this,x=n.survey.config,M=x.theme||"",F="320px",y="1px",K="320px",H="450px",D=a.createElement("div");C.theme=M;C.surveyEId=G;k.widgetContainer.appendChild(D);D.setAttribute("id",k.widgetContainerId+"-survey-content");var B=q.getInitParamValue(C._surveyOptions,"alignment",x.alignment,["left","right"]);var w=D.style;w.height=y;w.width=F;w.zIndex=(q.getMaxZIndex()+1);w.position=(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?"absolute":"fixed");w.backgroundColor="transparent";if("right"==B){w.right="0px"}else{w.left="10px"}w.bottom="20px";w.display="block";var L;var v;if(M=="dark"||M=="light"){L=k.baseStaticUrl+"/images/webengage/icons/mini-survey-close-"+M+".png";v=k.baseStaticUrl+"/images/webengage/icons/mini-survey-expand-collapse-"+M+".png"}else{L=k.baseStaticUrl+"/images/webengage/icons/mini-survey-close-light.png";v=k.baseStaticUrl+"/images/webengage/icons/mini-survey-expand-collapse-light.png"}var E=a.createElement("div");E.id=k.widgetContainerId+"-survey-close-div";E.innerHTML="&nbsp;";D.appendChild(E);var I=E.style;I.zIndex=q.getMaxZIndex()+1;I.position="absolute";I.right="30px";I.bottom="5px";I.height="16px";I.display="none";I.width="16px";I.cursor="pointer";I.backgroundImage="url('"+L+"')";I.backgroundRepeat="no-repeat";I.backgroundPosition="0 0";I.backgroundColor="transparent";if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){I.backgroundImage="";I.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop src='"+L+"')"}var J=a.createElement("div");J.id=k.widgetContainerId+"-survey-minimize-div";J.innerHTML="&nbsp;";D.appendChild(J);var u=J.style;u.zIndex=q.getMaxZIndex()+1;u.position="absolute";u.right="50px";u.bottom="5px";u.height="16px";u.width="16px";u.display="none";u.cursor="pointer";u.backgroundImage="url('"+v+"')";u.backgroundRepeat="no-repeat";u.backgroundPosition="0 0";u.backgroundColor="transparent";if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){u.backgroundImage="";u.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop src='"+v+"')"}a.$SurveyWidgetInitializer={currentInstance:C,containerId:k.widgetContainerId,licenseCode:g,appHost:k.surveyAppHost,minWidth:F,maxWidth:K,minHeight:y,maxHeight:H};var A;if(q.isJqueryPresent()){A=k.widgetDomain+(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?k.loadSurveyWidgetWoJQueryUrlv3:k.loadSurveyWidgetWoJQueryUrl)}else{A=k.widgetDomain+(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?k.loadSurveyWidgetJQueryUrlv3:k.loadSurveyWidgetJQueryUrl)}var z=a.createElement("script");z.type="text/javascript";z.src=A;k.widgetContainer.appendChild(z)}},t={onOpen:function(u){return this.bind("open",u)},onSubmit:function(u){return this.bind("submit",u)},onClose:function(u){return this.bind("close",u)},bind:function(){return q.bind.apply(this,arguments)},unbind:function(){return q.unbind.apply(this,arguments)},executeCallbacks:function(){return q.executeCallbacks.apply(this,arguments)}};return{render:function(u){return(new function(){c.survey.clear();var A=this;A.cbid=1;r[r.length]=A;var v={surveyId:f["webengage.survey.surveyId"]||"",skipRuleExecution:f["webengage.survey.skipRuleExecution"]||false,forcedRender:f["webengage.survey.forcedRender"]||false,delay:f["webengage.survey.delay"]||-1,customData:f["webengage.survey.customData"]||f["webengage.customData"]||{},ruleData:f["webengage.survey.ruleData"]||f["webengage.ruleData"]||{},isDemoMode:f["webengage.survey.isDemoMode"]||f["webengage.isDemoMode"]||false,alignment:f["webengage.survey.alignment"]||"",scope:f["webengage.survey.scope"]||"",scopeType:f["webengage.survey.scopeType"]||""};var w={showAllClosedAndTakenSurveys:"forcedRender",data:"customData",demo:"isDemoMode"};if(u!==e&&!q.isEmptyObject(u)){for(var z in u){var x=w[z];if(x!==e&&x){u[x]=u[z];delete u[z]}}}A._surveyOptions=q.copy(v,(u?u:{}),true);A._surveyOptions.forcedRender=typeof A._surveyOptions.forcedRender==="boolean"?A._surveyOptions.forcedRender:false;if(A._surveyOptions.forcedRender){A._surveyOptions.scope=(new Date()).getTime();A._surveyOptions.scopeType=null}if(n.survey&&n.survey.isEnabled&&!q.isEmptyObject(n.survey.ruleMap)&&(a.location.protocol=="http:"||(a.location.protocol=="https:"&&n.sslEnabled))){q.copy(A,t,true);A.onSubmit((A._surveyOptions.onSubmit||f["webengage.survey.onSubmit"]));A.onClose((A._surveyOptions.onClose||f["webengage.survey.onClose"]));A.onOpen((A._surveyOptions.onOpen||f["webengage.survey.onOpen"]));A.totalTimeElapsed=0;var y=setInterval(function(){A.totalTimeElapsed+=10;var L=q.getSessionCookie();if(A._surveyOptions.skipRuleExecution||(L&&L.country)||A.totalTimeElapsed>5000){if(!L){L=q.setSessionCookie()}clearInterval(y);var I=n.survey.ruleMap,J=q.getWebengageCookie(),K=A._surveyOptions.surveyId,F=[],E={};if(K&&I[K]){var B={};B[K]=I[K];I=B}var C=0;for(var N in I){var D=N,M=I[N].ruleCode,O=I[N].timespent||0,G=D+(A._surveyOptions.scope&&(A._surveyOptions.scopeType+"").toUpperCase()!="GLOBAL"?"["+q.escapeScopeChars(A._surveyOptions.scope)+"]":""),H=q.escapeForRegExp(G);if(!A._surveyOptions.isDemoMode){if(!A._surveyOptions.forcedRender&&((L.closedSurveys!==e&&(L.closedSurveys.match("##"+H+"##")||L.closedSurveys.match("##"+H+"$")))||(J.takenSurveys!==e&&(J.takenSurveys.match("##"+H+"##")||J.takenSurveys.match("##"+H+"$"))))){continue}if(!A._surveyOptions.skipRuleExecution&&M!==e&&M){if(!c.ruleExecutor.execute(M,A._surveyOptions.ruleData)){continue}}if(C==0){C=O}C=C>O?O:C}F[F.length]=D;E[D]=O}setTimeout(function(){if(F.length>0){function R(V,U){A.open=function(){var X=this,W=0;if(arguments&&typeof arguments[0]==="boolean"&&arguments[0]){W=U||0}if(parseInt(X._surveyOptions.delay,10)>=0){W=parseInt(X._surveyOptions.delay,10)}var Y=X.totalTimeElapsed+X.minTimespentVal;setTimeout(function(){s.apply(X,[V])},((W-Y)<0?0:(W-Y)))};A.open(true)}if(!A._surveyOptions.forcedRender){var P=[];for(var S=0;S<F.length;S++){if(S>0){P[P.length]="&"}P[P.length]="surveyIds="+F[S]}var Q=k.findAllTakenSurveysUrl()+"&"+P.join("")+(A._surveyOptions.scope?"&scope="+A._surveyOptions.scope:"")+(A._surveyOptions.scopeType?"&scopeType="+A._surveyOptions.scopeType:"");q.loadScript.apply(k.widgetContainer,[Q,function(V,X,W){var ab=[],Y={};if(we_notToExecuteSurveyIdsMap!==e){if(we_notToExecuteSurveyIdsMap.takenSurveyIds!==e&&we_notToExecuteSurveyIdsMap.takenSurveyIds.length>0){if(J.takenSurveys===e||!J.takenSurveys){J.takenSurveys=""}for(var U=0;U<we_notToExecuteSurveyIdsMap.takenSurveyIds.length;U++){J.takenSurveys+="##"+we_notToExecuteSurveyIdsMap.takenSurveyIds[U]+(A._surveyOptions.scope&&(A._surveyOptions.scopeType+"").toUpperCase()!="GLOBAL"?"["+escapeScopeChars(A._surveyOptions.scope)+"]":"");Y[we_notToExecuteSurveyIdsMap.takenSurveyIds[U]]=true}q.setWebengageCookie(J)}if(we_notToExecuteSurveyIdsMap.inactiveSurveyIds!==e&&we_notToExecuteSurveyIdsMap.inactiveSurveyIds.length>0){for(var aa=0;aa<we_notToExecuteSurveyIdsMap.inactiveSurveyIds.length;aa++){Y[we_notToExecuteSurveyIdsMap.inactiveSurveyIds[aa]]=true}}}for(var ac=0;ac<X.length;ac++){if(!Y[X[ac]]){ab[ab.length]=X[ac]}}if(ab.length>0){A.minTimespentVal=C;var Z=ab[0];R(Z,(V[Z]||0))}},[E,F,A.totalTimeElapsed]])}else{A.minTimespentVal=C;var T=F[0];R(T,(E[T]||0))}}},C)}},10)}else{if(n.survey&&n.survey.isEnabled&&a.location.protocol=="https:"&&!n.sslEnabled){}}})},clear:function(){try{k.widgetContainer.removeChild(a.getElementById(k.widgetContainerId+"-survey-content"))}catch(u){}a.$SurveyWidgetInitializer=null;r=[]}}})());q.extend("ServerTimestamp",(function(){var r=null,s=false;return{set:function(t){if(!s){r=t;s=true}},load:function(t){if(!s||r){q.loadScript.apply(k.widgetContainer,[k.serverTimestampUrl+"&callback=webengage.ServerTimestamp.set",function(){if(typeof(t)=="function"){t(r)}}])}}}})());q.extend("IFRAMES",(function(){var r=[];return{create:function(u,w,y){this.remove(u);var z=y||{};var s;try{s=a.createElement('<iframe name="'+u+'">')}catch(x){s=a.createElement("iframe");s.name=u}s.id=u;if(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()){s.src="javascript:void(0);"}s.frameBorder=z.frameBorder||"0";s.marginHeight=z.marginHeight||"0";s.marginWidth=z.marginWidth||"0";s.allowTransparency=z.allowTransparency||"true";var t=s.style;t.zIndex=(q.getMaxZIndex()+1);t.position=(c.BrowserDetect.is_this_the_worlds_most_annoying_browser()?"absolute":"fixed");t.backgroundColor=z.backgroundColor||"transparent";t.bottom=z.bottom||"0px";t.border=z.border||"none";t.overflow=z.overflow||"hidden";t.visibility=z.visibility||"hidden";var v=w||k.widgetContainer;v.appendChild(s);r[u]=s;if(typeof(z.onload)==="function"){if(s.attachEvent){s.attachEvent("onload",z.onload)}else{s.addEventListener("load",z.onload,false)}}return s},get:function(s){return r[s]},resize:function(t,s,u){var v=c.IFRAMES.get(t);v.style.height=s+"px"},remove:function(s){var t=c.IFRAMES.get(s);if(t){t.parentNode.removeChild(t)}if(d.frames[s]){delete d.frames[s]}delete r[s]},creatCallbackFrame:function(v,t,y,s){var x={};if(typeof(s)==="function"){x.onload=function(){var A=r[v];if(!A.widgetCallBackStatus||A.widgetCallBackStatus===0){A.widgetCallBackStatus=1}else{if(A.widgetCallBackStatus===1){A.contentWindow.location="about:blank";A.widgetCallBackStatus=2}else{if(A.widgetCallBackStatus===2){var z=A.contentWindow.name;if(z!==e&&z!==""){var B=q.parseJSON(z);if(B!==null){if(B.eventName!==e){s(B.eventName,B.data)}}}A.widgetCallBackStatus=0;c.IFRAMES.remove(v);A=c.IFRAMES.creatCallbackFrame(v,t,y,s)}}}}}var w=c.IFRAMES.create(v,t,x);var u=w.style;u.height=0;u.width=0;if(y){w.src=y}return w}}})());q.extend("notification",(function(){var t=[],r=function(B,y){var z=this;if(B||z._notificationOptions.previewJson!==e){z.notificationEId=B;z.layout=y||(z._notificationOptions.previewJson&&z._notificationOptions.previewJson.layout?z._notificationOptions.previewJson.layout:"");var v=c.IFRAMES.create(k.widgetContainerId+"-notification-frame",k.widgetContainer);v.style.top="-1000px";v.style.left="-1000px";var x=q.getSessionCookie();var A=null;if(v.contentDocument){A=v.contentDocument}else{if(v.contentWindow){A=v.contentWindow.document}else{if(v.document){A=v.document}}}A.open();var w=(z.layout===""?"notification-base.css":z.layout+"-notification-base.css");A.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="cache-control" content="max-age=0" /><meta http-equiv="cache-control" content="no-cache" /><meta http-equiv="pragma" content="no-cache" /><meta http-equiv="content-type" content="text/html; charset=utf-8"><link rel="stylesheet" type="text/css" href="//static-webengage.s3-ap-southeast-1.amazonaws.com/css/webengage/notification/'+w+'?v=103.0" media="screen"/></head><body class="notification-body"></body></html>');A.close();if(z._notificationOptions.previewJson!==e){A.$NotificationWidgetInitializer={currentInstance:z,containerId:k.widgetContainerId,licenseCode:g,appHost:k.baseWebEngageUrl,widgetDomain:k.widgetDomain,previewJson:z._notificationOptions.previewJson}}else{A.$NotificationWidgetInitializer={currentInstance:z,containerId:k.widgetContainerId,licenseCode:g,appHost:k.baseWebEngageUrl,widgetDomain:k.widgetDomain,browser:c.BrowserDetect.browser(),browserVersion:c.BrowserDetect.version(),os:c.BrowserDetect.os(),country:x.country||"",city:x.city||"",region:x.region||"",pageUrl:d.location.href,pageTitle:a.title,referrer:a.referrer}}var u=A.createElement("script");u.setAttribute("type","text/javascript");u.setAttribute("src",k.widgetDomain+k.notificationWidgetScriptUrl);A.body.appendChild(u)}},s={onOpen:function(u){return this.bind("open",u)},onClick:function(u){return this.bind("click",u)},onClose:function(u){return this.bind("close",u)},bind:function(){return q.bind.apply(this,arguments)},unbind:function(){return q.unbind.apply(this,arguments)},executeCallbacks:function(){return q.executeCallbacks.apply(this,arguments)}};return{render:function(u){return(new function(){c.notification.clear();var B=this;B.cbid=1;t[t.length]=B;var C={notificationId:f["webengage.notification.notificationId"]||"",skipRuleExecution:f["webengage.notification.skipRuleExecution"]||false,delay:f["webengage.notification.delay"]||-1,isDemoMode:f["webengage.notification.isDemoMode"]||f["webengage.isDemoMode"]||false,customData:f["webengage.notification.customData"]||f["webengage.customData"]||{},ruleData:f["webengage.notification.ruleData"]||f["webengage.ruleData"]||{},tokens:f["webengage.notification.tokens"]||f["webengage.tokens"]||{},previewJson:f["webengage.notification.previewJson"],forcedRender:f["webengage.notification.forcedRender"]||false};var A={data:"customData",demo:"isDemoMode"};if(u!==e&&!q.isEmptyObject(u)){for(var y in u){var w=A[y];if(w!==e&&w){u[w]=u[y];delete u[y]}}}B._notificationOptions=q.copy(C,(u?u:{}),true);q.copy(B,s,true);B.onClick((B._notificationOptions.onClick||f["webengage.notification.onClick"]));B.onClose((B._notificationOptions.onClose||f["webengage.notification.onClose"]));B.onOpen((B._notificationOptions.onOpen||f["webengage.notification.onOpen"]));if(!(("//"+q.getClientPageHost()).match(new RegExp(q.escapeForRegExp(k.baseWebEngageUrl)+"$","gi")))){B._notificationOptions.previewJson=e}if(B._notificationOptions.previewJson!==e){r.apply(B)}else{if(n.notification&&n.notification.isEnabled&&(a.location.protocol=="http:"||(a.location.protocol=="https:"&&n.sslEnabled))){var v=n.notification.ruleMap;B.totalTimeElapsed=0;var z=q.getSessionCookie();var x=setInterval(function(){B.totalTimeElapsed+=10;if(B._notificationOptions.skipRuleExecution||(z&&z.country)||B.totalTimeElapsed>5000){if(!z){z=q.setSessionCookie()}clearInterval(x);var P=q.getWebengageCookie();var D=B._notificationOptions.notificationId;if(D&&v[D]){var V={};V[D]=v[D];v=V}var R=[];var U={};for(var X in v){var E=X,S=v[X].layout,N=v[X].ruleCode,W=v[X].timespent,K=v[X].skipTargetPage,M=v[X].actionLinks,T=v[X].maxTimesPerUser;if(!B._notificationOptions.isDemoMode){if(!B._notificationOptions.forcedRender&&((z.closedNIds!==e&&z.closedNIds.indexOf("##"+E)>=0)||(P.takenNIds!==e&&P.takenNIds.indexOf("##"+E)>=0))){continue}if(K&&M instanceof Array&&M.length>0){for(var Q in M){var L=a.createElement("a");L.href=M[Q];M[Q]="^"+q.escapeForRegExp(L.href)+"$";L=null}if(c.ruleExecutor.util.isMatches(q.getClientPageUrl(),M)){continue}}var O=c.notification.getTotalTimesShown(E);if(!B._notificationOptions.isDemoMode&&T!==e){if(T<=O){continue}}if(!B._notificationOptions.skipRuleExecution&&N!==e&&N){if(!c.ruleExecutor.execute(N,B._notificationOptions.ruleData)){continue}}}R[R.length]=E;U[E]={timespent:W,layout:S}}function G(Z,Y){B.open=function(){var ab=this,aa=Y.timespent||0;if(parseInt(ab._notificationOptions.delay,10)>=0){aa=parseInt(ab._notificationOptions.delay,10)}setTimeout(function(){r.apply(ab,[Z,Y.layout])},((aa-ab.totalTimeElapsed)<0?0:(aa-ab.totalTimeElapsed)))};B.open()}if(R.length>0){var J=R[0];if(J!==e&&J){var I=v[J],F=I.startTimestamp,H=I.endTimestamp;if((F!==e&&F)||(H!==e&&H)){c.ServerTimestamp.load(function(aa){for(Q in R){var ab=R[Q];var Z=v[ab],ac=Z.startTimestamp,Y=Z.endTimestamp;if((Y!==e)&&(Y<aa)){continue}if((ac!==e)&&(aa<ac)){continue}G(ab,U[ab]);break}})}else{G(J,U[J])}}}}},10)}else{if(n.notification&&n.notification.isEnabled&&a.location.protocol=="https:"&&!n.sslEnabled){}}}})},getNotificationFrame:function(){return a.getElementById(k.widgetContainerId+"-notification-frame")},resize:function(w){var v=a.getElementById(k.widgetContainerId+"-notification-frame");v.height=w.height||v.contentWindow.document.body.scrollHeight;v.width=w.width||v.contentWindow.document.body.scrollWidth;var u=v.style;u.visibility="visible";u.height=parseInt(w.height||v.contentWindow.document.body.scrollHeight)+"px";u.width=parseInt(w.width||v.contentWindow.document.body.scrollWidth)+"px";u.top="auto";u.bottom="0px";u.left="auto";if("right"==w.launchType){u.right="0px"}else{u.left="0px"}},getTotalTimesShown:function(z){var u=0;if(z){try{var x=q.getWebengageCookie();if(x&&x.seenNIds){var w=new RegExp("##"+z+"=(\\d+)");var v=x.seenNIds.match(w);if(v instanceof Array&&v.length>1){u=v[1]}}}catch(y){}}return u},clear:function(){try{c.IFRAMES.remove(k.widgetContainerId+"-notification-frame")}catch(u){}delete t[this]}}})());q.extend("",{init:function(r){var s=function(t){if(r[t]!==e&&r[t]){f["webengage."+t]=r[t]}};s("licenseCode");s("language");s("isDemoMode");s("delay");return c}});q.extend("",{onReady:function(r){if(r!==e&&typeof r==="function"){f["webengage.oldOnReady"]=r}if(f["webengage.licenseCode"]!==e&&f["webengage.licenseCode"]){m()}}});q.extend("",{render:function(r){if(r){if(r.showFeedbackByDefault!==e&&!r.showFeedbackByDefault){f["webengage.feedback.defaultRender"]=false}if(r.showSurveyByDefault!==e&&!r.showSurveyByDefault){f["webengage.survey.defaultRender"]=false}if(r.showNotificationByDefault!==e&&!r.showNotificationByDefault){f["webengage.notification.defaultRender"]=false}}l()}});var m=function(){d.setTimeout(function(){g=f["webengage.licenseCode"];var t=a.createElement("webengagedata");a.body.insertBefore(t,null);k.weDataContainer=t;try{var w=a.createElement("style");var u=a.createTextNode("#webklipper-publisher-widget-container, #webklipper-publisher-widget-container * {overflow:visible; -webkit-box-sizing: content-box; -moz-box-sizing: content-box;  box-sizing: content-box;}#webklipper-publisher-widget-container-survey-content, #webklipper-publisher-widget-container-survey-content #webklipper-publisher-widget-container-survey-frame {max-height: 450px; max-width: 100%}");w.type="text/css";if(w.styleSheet){w.styleSheet.cssText=u.nodeValue}else{w.appendChild(u)}k.weDataContainer.appendChild(w)}catch(v){}var r=a.createElement("div");r.setAttribute("id",k.widgetContainerId);k.weDataContainer.appendChild(r);k.widgetContainer=r;if(!q.getWebengageCookie()){q.setWebengageCookie()}var s="//s3-ap-southeast-1.amazonaws.com/wk-static-files/webengage/"+g+"/v3.js";if(f["webengage.isDemoMode"]){s+="?r="+Math.random()}q.loadScript.apply(k.widgetContainer,[s,function(){var x=setInterval(function(){if(webengage_fs_configurationMap!==e&&webengage_fs_configurationMap.config){clearInterval(x);if(((webengage_fs_configurationMap.sites!==e&&webengage_fs_configurationMap.sites)||(webengage_fs_configurationMap.domain!==e&&webengage_fs_configurationMap.domain))&&!f["webengage.isDemoMode"]){var C=false;var y=q.getClientPageHost(),A;if(y.match(/\:[\d]*$/)){A=y.substring(y.indexOf(":")+1,y.length);y=y.substring(0,y.indexOf(":"))}var I=[];var D=[];if(webengage_fs_configurationMap.sites===e||!webengage_fs_configurationMap.sites){webengage_fs_configurationMap.sites={};webengage_fs_configurationMap.sites[webengage_fs_configurationMap.domain]="DOMAIN"}for(var G in webengage_fs_configurationMap.sites){var E=G,H;if(webengage_fs_configurationMap.sites[G]=="DOMAIN"){I[I.length]=E;if(E.match(/^www\./)){E=E.substring(4,E.length)}if(E.match(/\:[\d]*$/)){H=E.substring(E.indexOf(":")+1,E.length);E=E.substring(0,E.indexOf(":"))}if((y.match(new RegExp(q.escapeForRegExp(E)+"$","gi"))&&(!H||H==A))){C=true;break}}else{if(webengage_fs_configurationMap.sites[G]=="REGEXP"){var z=E;D[D.length]=E;if((q.getClientPageUrl().match(z))){C=true;break}}}}if(!C){var B="The WebEngage widget on this page is incorrectly configured. It is meant for use only on ";if(I.length>0){B+="<b>"+I.join(", ")+"</b> and "+(I.length>1?"their":"its")+" subdomains"}if(D.length>0){if(I.length>0){B+=(" and ")}B+=("pages with URLs that matches following regular expression(s) <b>"+D.join(", ")+"</b>")}c.logger.error(B+".");return}}k.publisherTimeZoneOffset=webengage_fs_configurationMap.tzo;q.copy(n,(function(J){return{configurationMap:J?J:{}}})(webengage_fs_configurationMap));if((typeof(webengage_fs_configurationMap.config.enableSurvey)=="boolean"&&webengage_fs_configurationMap.config.enableSurvey&&webengage_fs_configurationMap.surveyRuleList!==e&&webengage_fs_configurationMap.surveyRuleList instanceof Array&&webengage_fs_configurationMap.surveyRuleList.length>0)||(typeof(webengage_fs_configurationMap.config.enableNotification)=="boolean"&&webengage_fs_configurationMap.config.enableNotification&&webengage_fs_configurationMap.notificationRuleList!==e&&webengage_fs_configurationMap.notificationRuleList instanceof Array&&webengage_fs_configurationMap.notificationRuleList.length>0)){var F=q.getSessionCookie();if(!F||!F.country||F.country===e){if((a.location.protocol=="http:"||(a.location.protocol=="https:"&&webengage_fs_configurationMap.sslEnabled))){c.GEO.load(function(){q.setSessionCookie()});p()}}else{p()}}else{p()}}},1)},null,function(){}])},(f["webengage.delay"]&&parseInt(f["webengage.delay"])>0?parseInt(f["webengage.delay"]):0))},p=function(){(function(r){q.extend("widgetConfiguration",{});if(r&&r.config){q.copy(n,{feedback:{isEnabled:(typeof r.config.enableFeedback=="boolean"&&r.config.enableFeedback),config:r.config.feedbackConfig?r.config.feedbackConfig:{}}},true);q.copy(n,{survey:{isEnabled:(typeof r.config.enableSurvey=="boolean"&&r.config.enableSurvey),config:r.config.surveyConfig?r.config.surveyConfig:{},ruleMap:(function(){var u={};if(r.surveyRuleList){var s=r.surveyRuleList;for(var t=0;t<s.length;t++){u[s[t].surveyEncId]={ruleCode:s[t].ruleCode,timespent:parseInt(s[t].timeSpent)!="NaN"?parseInt(s[t].timeSpent):0}}}return u})()}},true);q.copy(n,{notification:{isEnabled:(typeof r.config.enableNotification=="boolean"&&r.config.enableNotification),ruleMap:(function(){var t={};if(r.notificationRuleList){var u=r.notificationRuleList;for(var s=0;s<u.length;s++){t[u[s].notificationEncId]={ruleCode:u[s].ruleCode,timespent:parseInt(u[s].timeSpent)!="NaN"?parseInt(u[s].timeSpent):0,actionLinks:u[s].actionLinks||[],skipTargetPage:typeof(u[s].skipTargetPage)=="boolean"?u[s].skipTargetPage:false,maxTimesPerUser:u[s].maxTimesPerUser,startTimestamp:u[s].startTimestamp,endTimestamp:u[s].endTimestamp,layout:u[s].layout}}}return t})()}},true);q.copy(n,{sslEnabled:(r.sslEnabled?r.sslEnabled:false)},true)}if(f["webengage.oldOnReady"]!==e&&typeof f["webengage.oldOnReady"]==="function"){f["webengage.oldOnReady"].apply(this)}else{if(f["webengage.onReady"]!==e&&typeof f["webengage.onReady"]==="function"){f["webengage.onReady"].apply(this);l()}else{l()}}})(n.configurationMap)},l=function(){var r=function(t){var s=typeof f["webengage."+t+".defaultRender"]==="boolean"?f["webengage."+t+".defaultRender"]:f["webengage.defaultRender"];return(typeof s==="boolean"?s:true)};if(r("feedback")){setTimeout(function(){c.feedback.render()},1)}if(r("survey")){setTimeout(function(){c.survey.render()},1)}if(r("notification")){setTimeout(function(){c.notification.render()},1)}};if(d.webengageWidgetInit!==e&&typeof d.webengageWidgetInit==="function"){d.webengageWidgetInit()}else{var j=a.getElementsByTagName("webengage")[0];if(j&&j.attributes){var h=j.attributes;f["webengage.licenseCode"]=h.license.value;f["webengage.language"]=(h.language?h.language.value:"");if(h.feedbackButtonAlignment){f["webengage.feedback.alignment"]=h.feedbackButtonAlignment.value}if(h.feedbackExternalLinkId){f["webengage.feedback.externalLinkId"]=h.feedbackExternalLinkId.value}}if(f["webengage.licenseCode"]!==e&&f["webengage.licenseCode"]){m()}}};if(navigator.appName=="Microsoft Internet Explorer"){if(a.body&&(a.body.readyState=="loaded"||a.body.readyState=="complete")){b()}else{if(d.addEventListener){d.addEventListener("load",function(){b()},false)}else{if(d.attachEvent){d.attachEvent("onload",function(){b()})}}}}else{b()}})(window,document,_weq,webengage)},10);